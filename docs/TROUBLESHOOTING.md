# ❗ 故障排除与 FAQ

如果您在使用 X 搜索增强插件时遇到问题，请先尝试以下常见的解决方案。

## 插件图标显示感叹号 (!) 或灰色不可用

- **原因**:

  1.  **当前页面非 X.com**: 插件主要功能仅设计用于 `https://x.com/` 或 `https://twitter.com/` 域名下的页面。如果您在其他网站上，插件图标可能会显示为不可用状态或提示。

  2.  **插件权限问题**: 极少数情况下，浏览器可能未能正确授予插件所需的权限。

- **解决方案**:

  1.  请确保您当前活动的浏览器标签页是 X.com 或其旧域名 twitter.com。

  2.  尝试刷新 X.com 页面。

  3.  检查浏览器的扩展管理页面 (`chrome://extensions/` 或 `edge://extensions/`)，确保 X 搜索增强插件已启用，并且没有显示任何错误信息。如果插件被禁用，请重新启用它。

  4.  如果问题持续，尝试在扩展管理页面禁用再重新启用本插件。

## 用户个人资料页找不到添加/移除特别关注的星标按钮 (☆/⭐)

- **原因**:

  1.  **X.com 页面结构变化**: X.com 网站的 HTML 结构会不定期更新。如果其页面结构发生较大变化，插件用于定位用户名区域以添加星标按钮的 CSS 选择器可能会失效。

  2.  **页面内容未完全加载**: 在网络较慢或页面内容复杂的情况下，插件可能在尝试添加按钮时，相关的 DOM 元素尚未完全加载到页面上。

  3.  **与其他扩展冲突**: 少数情况下，其他修改 X.com 页面的浏览器扩展可能与本插件产生冲突，阻止星标按钮的正确显示。

- **解决方案**:

  1.  **刷新页面**: 这是最常见的解决方法。尝试强制刷新页面 (Windows: `Ctrl+F5` 或 `Ctrl+Shift+R`, Mac: `Cmd+Shift+R`)，并等待页面元素完全加载后再查看。

  2.  **等待加载**: 如果页面正在动态加载内容，请稍等片刻。

  3.  **检查插件版本**: 确保您使用的是最新版本的 X 搜索增强插件。开发者可能会在新版本中修复因 X.com 结构更新导致的问题。

  4.  **禁用其他扩展**: 临时禁用其他可能修改 X.com 页面的浏览器扩展，然后刷新页面，看星标按钮是否出现。如果出现，则逐个重新启用其他扩展，以找出冲突的扩展。

  5.  **检查控制台**: 打开浏览器开发者工具（通常按 F12），切换到“控制台”(Console) 标签页。查看是否有与本插件（通常日志会以 "XSE:" 或类似前缀开头）相关的错误或警告信息，例如 "Username line container not found"。这些信息有助于定位问题。

  6.  **报告问题**: 如果以上方法都无效，且您怀疑是 X.com 结构更新导致的问题，请考虑向插件开发者报告此问题（例如通过项目的 Issue 追踪系统），并提供您正在使用的浏览器版本、插件版本以及问题发生时的页面 URL。

## 搜索面板无法打开或行为异常

- **原因**:

  1.  **内容脚本未能正确加载或初始化**: `content_script.js` 是插件在页面上运行核心逻辑的脚本。如果它未能成功注入或在注入后执行出错，面板可能无法正常工作。

  2.  **浏览器扩展上下文失效**: 在某些情况下（例如插件刚刚更新、浏览器重启、或长时间未使用后），扩展的运行上下文可能暂时失效。

  3.  **与其他扩展冲突**: 类似星标按钮的问题，其他扩展也可能干扰面板的显示或功能。

- **解决方案**:

  1.  **刷新 X.com 页面**: 这通常能解决临时的脚本加载问题。

  2.  **点击插件图标**: 尝试再次点击浏览器工具栏上的插件图标。

  3.  **禁用再启用插件**: 在浏览器的扩展管理页面，尝试禁用 X 搜索增强插件，然后再重新启用它。

  4.  **重启浏览器**: 关闭并重新打开您的浏览器。

  5.  **检查控制台**: 查看浏览器开发者工具的控制台是否有相关错误信息。

  6.  **禁用其他扩展**: 排除与其他扩展冲突的可能性。

## 高级筛选条件不生效或显示不正确

- **原因**:

  1.  **状态未正确保存/加载**: 插件使用 `chrome.storage.local` 保存高级筛选的设置。如果读写存储时发生错误，或者状态更新逻辑有缺陷，可能导致条件不生效或显示不一致。

  2.  **日期范围无效**: 如果您设置的“开始日期”晚于“结束日期”，搜索将不会执行，并且面板上应该有错误提示。

  3.  **`from:username` 显隐逻辑冲突**: “指定用户”筛选框的显示与否取决于“特别关注”列表的状态。如果这个联动逻辑出现问题，可能会导致显示不符合预期。

  4.  **与其他扩展冲突**: 可能性较低，但仍需考虑。

- **解决方案**:

  1.  **检查控制台**: 查看浏览器开发者工具的控制台是否有与高级筛选、存储相关的错误或警告信息。

  2.  **清除筛选**: 在高级筛选区域内，尝试点击“清除筛选”按钮，将所有条件重置为默认值，然后重新设置您需要的条件。

  3.  **检查日期**: 确保您设置的“开始日期”不晚于“结束日期”。面板上应该有明确的错误提示信息（例如红色的文字提示）。

  4.  **检查“特别关注”列表**: 确认您的“特别关注”列表状态是否与预期一致，以及基于此，“指定用户”(`from:username`) 字段是否按预期显示或隐藏。

  5.  **禁用其他扩展**: 临时禁用其他浏览器扩展，看是否解决问题，以排除冲突。

  6.  **重置插件状态 (最后手段)**: 如果问题非常顽固，您可以尝试清除插件的存储数据。这通常需要在扩展管理页面找到插件，并查看是否有“清除数据”或类似的选项（不一定所有浏览器或插件都提供此功能）。或者，卸载插件后重新安装（**注意：这将清除您所有已保存的特别关注用户和设置**）。

## 特别关注用户的星标徽章 (⭐) 未在搜索结果中显示

- **原因**:

  1.  **内容脚本问题**: 负责添加徽章的逻辑在 `content_script.js` 中。如果脚本未运行或出错，徽章可能无法添加。

  2.  **X.com 页面结构变化**: 插件需要识别推文的作者信息来判断是否添加徽章。如果 X.com 修改了搜索结果页面的 DOM 结构，相关选择器可能失效。

  3.  **动态加载**: 搜索结果可能是动态加载的，插件可能未能及时为新加载的推文添加徽章。

- **解决方案**:

  1.  **刷新搜索结果页面**。

  2.  **确保“特别关注”列表正确**: 检查插件面板，确认您想要看到徽章的用户确实在您的特别关注列表中。

  3.  **检查控制台**: 查看是否有相关错误。

  4.  **等待插件更新**: 如果是由于 X.com 结构变化导致，通常需要等待插件开发者更新。

## 一般性建议

- **保持插件更新**: 始终使用最新版本的 X 搜索增强插件，因为新版本通常会包含功能改进和 Bug 修复。

- **保持浏览器更新**: 确保您的浏览器也是最新版本，以获得最佳的兼容性和安全性。

- **提供详细反馈**: 如果您需要报告 Bug，请尽量提供详细信息，包括：

  - 您使用的浏览器名称和版本。

  - X 搜索增强插件的版本。

  - 问题发生的具体步骤。

  - 错误发生时的页面 URL。

  - 浏览器开发者工具控制台中显示的任何相关错误信息或截图。
  - 您已尝试过的故障排除步骤。

希望这些信息能帮助您解决使用中可能遇到的问题！
